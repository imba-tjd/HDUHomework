# 网络

## 分组交换

* 多数分组交换机在链路的输入端使用**储存转发传输机制**：传输分组前必须接收整个分组
* 处理时延：检查差错，同步卫星的很大
* 排队时延：等待传输，如果是空的则为0，用流量强度衡量：La/R，L是每组比特数（每个请求的网速），a是每秒到达的分组数（每秒请求数），R是传输速率（带宽大小）；不能大于1，否则丢包
* 传输时延：将分组推向链路所需的时间，NL/R，N为路由器数量加一或链路数，L是比特数，R是传输速率且是所有链路中速度最小的哪个（瓶颈链路）
* 传播时延：d/s，d为略小于光速的速度，s为距离
* 传输效率=吞吐量/带宽

## 电路交换

* 频分复用、时分复用

# 其他

* IXP：因特网交换点



应用层

HTTP、SMTP（POP3、IMAP）、DNS、FTP、P2P（最小分发时间）

非持久HTTP请求的时间：两次RTT+传输整个文件的时间

FTP：20端口数据连接，21端口控制连接。控制信息带外传送

SMTP：一般不使用中间邮件服务器；POP3、IMAP仅用于访问邮件，不能发

DNS：记录以(Name,Value,Type,TTL)组成，Type分为A、NS、CNAME、MX；向本地DNS服务器查询用递归，随后它用迭代

TCP

多路复用和多路分解

利用率：实际推数据的时间（nL/R）/总时间（RTT+L/R）；，其中停等协议的n为1，，而分母一直不带n

最大传输单元MTU一般为1500字节，而TCP与IP头分别为20字节，所以最大报文段长度MSS一般为1460字节（但此术语实际上指的是应用层数据的最大长度）


可信信道 -> 有差错的信道（校验和、NAK） -> 包会丢失的信道（定时器，超时策略） -> 流水线（序号，GBN、选择重传）

GBN会丢弃失序分组；GBN超时时会重传所有未确认的分组，而TCP只会重传那一个，而且如果只是那一个ACK丢失而后续接收，TCP连这一个都不会重传

选择重传的窗口长度必须小于等于序号空间大小（比如只用0123来标记分组，重复使用）的一半

单纯ACK和Reset丢失不会超时重传，直到对方超时重传数据再传，也可主动发ACK和数据。

---

相同网段的通信
ip地址：网段号+主机号
ARP请求是广播，MAC填全F；回答是单播
广播域：Hub及所连的主机

不同网段的通信
1. 判断是不同网段的
2. 查找路由表
3. 发现网关MAC
4. ip包发给网关
5. 网关接收以太网帧
6. 网关路由转发

应用层：应用数据（APP Data）
传输层：TCP为段（Segment），UDP为数据报（Datagram）
网络层：包（Packet），如IP包
数据链路层：帧（Frame），如以太网帧

访问互联网：
域名解析
浏览器HTTP打包
TCP三次握手
传输IP包
网页回传
释放连接

TCP：
确认收货机制：Sequence Number、Acknowledge Number

